"use strict";(self.webpackChunkdjinn=self.webpackChunkdjinn||[]).push([[865],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var i=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=i.createContext({}),c=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=c(e.components);return i.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(n),h=o,m=d["".concat(s,".").concat(h)]||d[h]||u[h]||r;return n?i.createElement(m,a(a({ref:t},p),{},{components:n})):i.createElement(m,a({ref:t},p))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,a=new Array(r);a[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,a[1]=l;for(var c=2;c<r;c++)a[c]=n[c];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9634:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return u}});var i=n(7462),o=n(3366),r=(n(7294),n(3905)),a=["components"],l={id:"security-model",title:"Security Model",sidebar_position:4,custom_edit_url:null},s="Security model",c={unversionedId:"djinn-board/security-model",id:"djinn-board/security-model",title:"Security Model",description:"The board is going to be exposed to the user network and because of this, the board comes with a security model built-in, since security is one of the principles for Djinn we protect the data with Authorization and access control.",source:"@site/docs/djinn-board/security-model.md",sourceDirName:"djinn-board",slug:"/djinn-board/security-model",permalink:"/docs/djinn-board/security-model",editUrl:null,tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"security-model",title:"Security Model",sidebar_position:4,custom_edit_url:null},sidebar:"tutorialSidebar",previous:{title:"Agent",permalink:"/docs/djinn-board/architecture/agent"},next:{title:"Overview",permalink:"/docs/djinn-cloud/overview"}},p={},u=[{value:"Principle of Least Privilege",id:"principle-of-least-privilege",level:2},{value:"Limit the area of attack",id:"limit-the-area-of-attack",level:2},{value:"Isolation",id:"isolation",level:2},{value:"Encryption",id:"encryption",level:2},{value:"Secure endpoints",id:"secure-endpoints",level:2}],d={toc:u};function h(e){var t=e.components,n=(0,o.Z)(e,a);return(0,r.kt)("wrapper",(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"security-model"},"Security model"),(0,r.kt)("p",null,"The board is going to be exposed to the user network and because of this, the board comes with a security model built-in, since security is one of the principles for Djinn we protect the data with Authorization and access control."),(0,r.kt)("p",null,"On the board, we are going to treat sensitive information as ",(0,r.kt)("a",{parentName:"p",href:"https://www.cyberark.com/what-is/secrets-management/"},"Secrets"),", k3s supports this concept and is going to encrypt that information and limit the access only to the services that really require them."),(0,r.kt)("h2",{id:"principle-of-least-privilege"},"Principle of Least Privilege"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://digitalguardian.com/blog/what-principle-least-privilege-polp-best-practice-information-security-and-compliance"},"POLP")," is going to be the guiding method that is going to be used to build the security of the model, this principle states that we only provide enough access to performed the job that is required."),(0,r.kt)("h2",{id:"limit-the-area-of-attack"},"Limit the area of attack"),(0,r.kt)("p",null,"The board is only going to export two ports, ",(0,r.kt)("inlineCode",{parentName:"p"},"80")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"443"),"."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Why these ports?")),(0,r.kt)("p",null,"One of the principles is ",(0,r.kt)("a",{parentName:"p",href:"/docs/intro#simplicity"},"Simplicity"),", we want to make it easy for the user to use the application without the need to install something and everyone has a device that has a browser, we are going to use ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/HTTPS"},"HTTPS")," as the only communication protocol and ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTPS")," run on port ",(0,r.kt)("inlineCode",{parentName:"p"},"443"),"."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"What about the port 80?")),(0,r.kt)("p",null,"Port ",(0,r.kt)("inlineCode",{parentName:"p"},"80")," is used for ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP")," which is insecure, we are going to expose it but not use it, the user could accidentally type port ",(0,r.kt)("inlineCode",{parentName:"p"},"80")," and the board is going to automatically redirect to port ",(0,r.kt)("inlineCode",{parentName:"p"},"443"),"."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"If you are exposing multiple services, how do you expose them in a single port?")),(0,r.kt)("p",null,"For this reason, we are going to handle these services with DNS, the board has an internal DNS server that knows how to handle these requests, so the services would look like this:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Service"),(0,r.kt)("th",{parentName:"tr",align:null},"URL"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Authentication Server"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"https://oauth.djinn.local"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Web Client"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"https://app.djinn.local"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Gateway"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"https://api.djinn.local"))))),(0,r.kt)("p",null,"Using DNS for naming resolution is not only more secure since we are only exposing a single port, but it also makes the URL easier to read."),(0,r.kt)("h2",{id:"isolation"},"Isolation"),(0,r.kt)("p",null,"For the architecture, we are not just following POLP but we are also following the ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Single-responsibility_principle"},"Single Responsibility Principle (SRP)"),", which establishes:"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Every module, class, or function in a computer program should have responsibility for a single part of that program's functionality, and it should encapsulate that part.")),(0,r.kt)("p",null,"There are multiple levels of isolation used in the architecture:\n| Type | Description |\n| ----------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| Plugin Isolation | In the board each module is independent of each other, they only know about their own code and the hardware that they have at their disposal |\n| Process Isolation | On the board each module is independent of the other, they only know about their own code and the hardware that they have at their disposal |\n| Module Isolation | Every module that exists in the architecture only fulfills a single role (SRP), which limits the control that the module has in the architecture |\n| Storage Isolation | The filesystem is shared in some sections but at the same time is isolated in others, k3s enable us to enforce filesystem access by the process |"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Why do we need isolation?")),(0,r.kt)("p",null,"From a security perspective, if each one of the pieces is isolated from each other and one of them is compromised, this limits the attack to only one module and it doesn't affect the other modules."),(0,r.kt)("h2",{id:"encryption"},"Encryption"),(0,r.kt)("p",null,"After the board is installed and rebooting for the first time, it generates a unique encryption key that is stored as a secret in k3s, this encryption key is hidden and is not accessible from the outside world, and is only accessible by the modules that k3s instantiate."),(0,r.kt)("p",null,"This encryption key is going to be used to encrypt and decrypt all the data that is stored in the database."),(0,r.kt)("h2",{id:"secure-endpoints"},"Secure endpoints"),(0,r.kt)("p",null,"All the exposed endpoints are required to use SSL, the gateway and the agent both use gRPC, which supports SSL/TLS for authentication, and the web client which exposes a GraphQL version as well run an HTTPS server, where the certificate is generated by the board."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://web.dev/how-to-use-local-https/"},"How to use HTTPS for local development")," describes how this can be achieved.")),(0,r.kt)("p",null,"The endpoints that are exposed by the gateway, rely on OAuth authentication, in which the board provides an OAuth Resource and Authentication built-in."))}h.isMDXComponent=!0}}]);